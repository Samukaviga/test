import{_ as E,C as $}from"./Card-B5F8tRiB.js";import{_ as h}from"./Badge-DbB7naSZ.js";import{d as b,p as V,u as k,f as P,e as D,g as _,q as j,h as q,a as B,o as g,b as o,i as r,w as M,j as d,k as l,t as O,l as A,n as F}from"./index-D640GkUC.js";import{_ as I,a as N,b as R}from"./Button-DWcyK7x-.js";import{u as U}from"./contactStore-BgItkBVa.js";const z={class:"flex flex-col gap-0 w-full"},G={class:"flex flex-col sm:flex-row sm:gap-2 md:mb-4 w-full"},L=b({__name:"FormComplete",setup(x){const c=V(),a=k(),v="https://indicacao.colegioitaqua.com.br",s=c.params.id,u=U(c.params.id),i=P({indicated_date_of_birth:"",indicated_education_level:""});D(()=>{console.log(s),(!u.contact||u.contact.id!==s)&&(console.warn("Contato não encontrado no store, redirecionando para /404..."),a.push("/404"))});const w=[{etapa:"Educação Infantil",series:[{serie:"Menor de 1 ano",idade:1,obrigatoria:!1},{serie:"Pré-Escola - 2 anos",idade:2,obrigatoria:!1},{serie:"Pré-Escola - 3 anos",idade:3,obrigatoria:!1},{serie:"Pré-Escola - 4 anos",idade:4,obrigatoria:!0},{serie:"Pré-Escola - 5 anos",idade:5,obrigatoria:!0}]},{etapa:"Ensino Fundamental",series:[{serie:"1º ano",idade:6,obrigatoria:!0},{serie:"2º ano",idade:7,obrigatoria:!0},{serie:"3º ano",idade:8,obrigatoria:!0},{serie:"4º ano",idade:9,obrigatoria:!0},{serie:"5º ano",idade:10,obrigatoria:!0},{serie:"6º ano",idade:11,obrigatoria:!0},{serie:"7º ano",idade:12,obrigatoria:!0},{serie:"8º ano",idade:13,obrigatoria:!0},{serie:"9º ano",idade:14,obrigatoria:!0}]},{etapa:"Ensino Médio",series:[{serie:"1ª série",idade:15,obrigatoria:!0},{serie:"2ª série",idade:16,obrigatoria:!0},{serie:"3ª série",idade:17,obrigatoria:!0}]}];function C(){return w.map(t=>({label:t.etapa,options:t.series.map(e=>({label:`${e.serie}`,value:e.serie}))}))}_(!1);const n=_(!1),m=_({});async function S(){try{const t={...i,contact_id:s};n.value=!0;const e=await R.patch(`${v}/api/registrations/${s}`,t,{});console.log(e),u.setContact({id:e.data.id,name:e.data.name,protocol:e.data.reference}),a.push(`/sucesso/${s}`)}catch(t){n.value=!1,t.response&&t.response.status===422&&(m.value=Object.fromEntries(Object.entries(t.response.data.errors).map(([e,p])=>[e,p[0]])))}}return(t,e)=>{const p=j("Select"),y=q("mask");return g(),B("form",{class:"flex flex-col gap-3 w-full",onSubmit:A(S,["prevent"])},[e[2]||(e[2]=o("span",{class:"text-gray-700 font-medium mb-1 mt-0.5"},"Endereço residencial:",-1)),o("div",z,[o("div",G,[M(r(I,{modelValue:i.indicated_date_of_birth,"onUpdate:modelValue":e[0]||(e[0]=f=>i.indicated_date_of_birth=f),type:"tel",placeholder:"Data de nascimento do Aluno indicado","aria-label":"Data de nascimento",error:m.value.indicated_date_of_birth},null,8,["modelValue","error"]),[[y,"##/##/####"]]),r(p,{modelValue:i.indicated_education_level,"onUpdate:modelValue":e[1]||(e[1]=f=>i.indicated_education_level=f),placeholder:"Série Atual",options:C(),error:m.value.indicated_education_level},null,8,["modelValue","options","error"])])]),r(N,{type:"submit",disabled:n.value},{default:d(()=>[l(O(n.value?"Salvando...":"Concluir Cadastro"),1)]),_:1},8,["disabled"])],32)}}}),T={class:"w-full flex flex-col items-center mt-6"},X=b({__name:"Complete",setup(x){return(c,a)=>(g(),F(E,null,{default:d(()=>[r($,{class:"max-w-md w-full"},{default:d(()=>[a[2]||(a[2]=o("h2",{class:"text-3xl font-bold text-blue-900 mb-5 text-center"}," Seu cadastro está quase completo! ",-1)),a[3]||(a[3]=o("p",{class:"text-blue-900 text-gray-700 text-base text-center mb-5"}," Preencha os dados abaixo para finalizar sua inscrição. ",-1)),r(L),o("div",T,[r(h,{bgClass:"bg-yellow-100",textClass:"text-yellow-800"},{default:d(()=>a[0]||(a[0]=[l(" Só mais um passo para concluir sua inscrição! ")])),_:1,__:[0]}),a[1]||(a[1]=o("span",{class:"text-gray-500 text-xs text-center mt-2"},[l(" Seus dados estão protegidos. "),o("br"),l(" Em caso de dúvida, nossa equipe está pronta para ajudar. ")],-1))])]),_:1,__:[2,3]})]),_:1}))}});export{X as default};
